# MAIN CONCEPTS

## Hello World

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style type="text/css">
        #app {
            color: #61dafb;
        }
    </style>
</head>
<body>
    <div id="app"></div>

    <!-- 
    <script crossorigin src="https://unpkg.com/react@16.12.0/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@16.12.0/umd/react-dom.development.js"></script> 
    <script crossorigin src="https://unpkg.com/babel-standalone@7.0.0-beta.3/babel.min.js"></script>    
    -->
    <script src="https://cdn.jsdelivr.net/npm/react@16.12.0/umd/react.development.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/react-dom@16.12.0/umd/react-dom.development.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@babel/standalone@7.8.4/babel.min.js"></script>
    <script type="text/babel">
        // 1. è™šæ‹Ÿ DOM å…ƒç´ å¯¹è±¡ï¼Œä¸æ˜¯å­—ç¬¦ä¸²ï¼›
        // é‡è¦ï¼šæ²¡æœ‰æŠ¥é”™çš„åŸå› åœ¨äºè¯¥è„šæœ¬ type ä¸º â€œtext/babelâ€ï¼Œ
        // "text/babel" å£°æ˜ï¼Œå‘ŠçŸ¥ babel.js è§£æé‡Œé¢çš„ä»£ç ï¼Œå‰æä½¿éœ€è¦å¼•å…¥ babel.js æ–‡ä»¶
        const vDom = <h1>Hello, world!</h1>;
        // 2. å°† è™šæ‹Ÿ DOM å…ƒç´ å¯¹è±¡æ¸²æŸ“åˆ°é¡µé¢çœŸå® DOM å®¹å™¨ä¸­
        ReactDOM.render(vDom, document.querySelector('#app'))
    </script>
</body>
</html>
```


## Introducing JSX

```js
// The tag syntax is neither a string nor html
const element = <h1>Hello, world!</h1>
```

> JSX, that is a syntax extension to JavaScript. 

JSX å¯ä»¥å¾ˆå¥½çš„æè¿° UI åº”è¯¥å‘ˆç°å‡ºå®ƒåº”æœ‰äº¤äº’çš„æœ¬è´¨å½¢å¼ã€‚

### Why JSX

React è®¤ä¸ºæ¸²æŸ“é€»è¾‘æœ¬è´¨ä¸Šä¸å…¶ä»– UI é€»è¾‘å†…åœ¨è€¦åˆï¼Œæ¯”å¦‚ï¼Œåœ¨ UI ä¸­éœ€è¦ç»‘å®šå¤„ç†äº‹ä»¶ã€åœ¨æŸäº›æ—¶åˆ»çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶éœ€è¦é€šçŸ¥åˆ° UIï¼Œä»¥åŠéœ€è¦åœ¨ UI ä¸­å±•ç¤ºå‡†å¤‡å¥½çš„æ•°æ®ã€‚

### Embedding Expressions in JSX

```javascript
const name = 'Nicholas'
const element = <h1>Hello, {name}</h1>

ReactDOM.render(element, document.querySelector('#app'))
```

åœ¨ JSX è¯­æ³•ä¸­ï¼Œä½ å¯ä»¥åœ¨å¤§æ‹¬å·å†…æ”¾ç½®ä»»ä½•æœ‰æ•ˆçš„ JavaScript è¡¨è¾¾å¼ã€‚

```javascript
// åœ¨ JSX ä¸­åµŒå…¥è¡¨è¾¾å¼
function formatName(user) {
    return user.firstName + ' ' + user.lastName
}

const user = {
    firstName: 'Nicholas',
    lastName: 'Eee'
}

const vDomEle = (
    <h1>
        Hello, {formatName(user)}
    </h1>
)

ReactDOM.render(vDomEle, document.querySelector('#app'))
```

### JSX is an Expression Too

> After compilation, JSX expressions become regular JavaScript function calls and evaluate to JavaScript objects.

```javascript
// å¯ä»¥åœ¨ if è¯­å¥å’Œ for è¯­å¥å¾ªç¯çš„ä»£ç å—ä¸­ä½¿ç”¨ JSX
function getGreeting(user) {
    if (user) {
        return <h1>Hello, {formatName(user)}!</h1>
    } else {
        return <h1>Hello, Nicholas.</h1>
    }
}
```

### Specifying Attributes with JSX

```javascript
// You can use quotes to specify string literals as attributes
const element = <div tabIndex="0"></div>
```

```javascript
// You may also use curly braces to embed a JavaScript expression in an attribute
const element = <img src={user.avatarUrl} />
```

> Donâ€™t put quotes around curly braces when embedding a JavaScript expression in an attribute. You should either use quotes (for string values) or curly braces (for expressions), but not both in the same attribute.

**é‡è¦** ç”±äº JSX çš„è¯­æ³•æ›´åŠ æ¥è¿‘ JavaScript è€Œä¸æ˜¯ HTMLï¼Œæ‰€ä»¥ ReactDOM ä½¿ç”¨ `camelCase`ï¼ˆå°é©¼å³°å‘½åï¼‰æ¥å®šä¹‰å±æ€§çš„åç§°ï¼Œè€Œä¸ä½¿ç”¨ HTML å±æ€§åç§°çš„å‘½åçº¦å®šã€‚

æ¯”å¦‚ï¼š`class` -> `className`ã€`tabindex` -> `tabIndex`

### Specifying Children with JSX

> If a tag is empty, you may close it immediately with `/>`ï¼Œlike XML:

```javascript
const element = <img src={user.avatarUrl}" />
```

> JSX tags may contain chilren:

```javascript
<div>
    <h1>Hello, {formatName(user)}</h1>
    <img src={user.avatarUrl} alt="avatar" />
</div>
```

> React ä¸­çš„ä¸€ä¸ªå¸¸è§æ¨¡å¼æ˜¯ä¸€ä¸ªç»„ä»¶è¿”å›å¤šä¸ªå…ƒç´ ã€‚Fragments å…è®¸ä½ å°†å­åˆ—è¡¨åˆ†ç»„ï¼Œè€Œæ— éœ€å‘ DOM æ·»åŠ é¢å¤–èŠ‚ç‚¹ã€‚

> `<></>` æ˜¯ `<React.Fragment></React.Fragment>` çš„ çŸ­è¯­æ³•ï¼›ä½†ä¸æ”¯æŒ key æˆ– å±æ€§

```javascript
<Fragment>
    <h1>Hello, {formatName(user)}</h1>
    <img src={user.avatarUrl} alt="avatar" />
</Fragment>

// ç­‰æ•ˆäº

<>
    <h1>Hello, {formatName(user)}</h1>
    <img src={user.avatarUrl} alt="avatar" />
</>
```

### JSX Prevents Injection Attacks

å¯ä»¥å®‰å…¨åœ°åœ¨ JSX å½“ä¸­æ’å…¥ç”¨æˆ·è¾“å…¥çš„å†…å®¹ï¼š

```javascript
const title = response.potentiallyMaliciousInput;
// ç›´æ¥ä½¿ç”¨æ˜¯å®‰å…¨çš„ï¼Œæ”¾å¿ƒå¤§èƒ†ä½¿ç”¨å§ ~
const element = <h1>{title}</h1>
```

ReactDOM åœ¨æ¸²æŸ“æ‰€æœ‰è¾“å…¥å†…å®¹ä¹‹å‰ï¼Œé»˜è®¤ä¼šè¿›è¡Œè½¬ä¹‰ã€‚å®ƒå¯ä»¥ç¡®ä¿åœ¨ä½ çš„åº”ç”¨ä¸­ï¼Œæ°¸è¿œä¸ä¼šæ³¨å…¥é‚£äº›å¹¶éè‡ªå·±æ˜ç¡®ç¼–å†™çš„å†…å®¹ã€‚æ‰€æœ‰çš„å†…å®¹åœ¨æ¸²æŸ“ä¹‹å‰éƒ½è¢«è½¬ä¹‰æˆäº†å­—ç¬¦ä¸²ï¼›å¯æœ‰æ•ˆé˜²æ­¢ `XSS (cross-site-scripting è·¨ç«™è„šæœ¬æ”»å‡»)` æ”»å‡»

### JSX Represents Objects 

> Babel compiles JSX down to `React.createElement()` calls.

Babel ä¼šæŠŠ JSX è½¬è¯‘æˆä¸€ä¸ªåä¸º `React.createElement()` å‡½æ•°è°ƒç”¨ã€‚

ä¹Ÿå°±æ˜¯è¯´ï¼š

```javascript
const element = (
    <h1 className="greeting">
        Hello, world
    </h1>
)

// ç­‰æ•ˆäº

const element = React.createElement('h1', {className: 'greeting'}, 'Hello, world')

// å®é™…ä¸Šä¼šåˆ›å»ºç±»ä¼¼è¿™æ ·çš„ä¸€ä¸ªå¯¹è±¡ï¼š
// æ³¨æ„ï¼šè¿™é‡Œåªæ˜¯ç®€å•åœ°æè¿°è¿™ä¸ª JSX å¯¹è±¡çš„ç»“æ„
const element = {
    type: 'h1',
    props: {
        className: 'greeting',
        children: 'Hello, world'
    }
}
```


## Rendering Elements

> Elements are the smallest building blocks of React apps.

å…ƒç´ æ˜¯ React åº”ç”¨ç¨‹åºçš„æœ€å°æ„å»ºå—ã€‚

### Rendering an Element into the DOM

```html
<!-- "root" DOM nodeï¼Œeverything inside it will be managed by React DOM -->
<div id="root"></div>
```

é€šå¸¸ï¼Œä½¿ç”¨ React æ„å»ºçš„åº”ç”¨åªæœ‰å•ä¸€çš„æ ¹ DOM èŠ‚ç‚¹ã€‚å¦‚æœæƒ³è¦å°†ä¸€ä¸ª React å…ƒç´ æ¸²æŸ“åˆ°æ ¹ DOM èŠ‚ç‚¹ä¸­ï¼Œåªéœ€è¦æŠŠå®ƒä»¬ä¸€èµ·ä¼ å…¥ `ReactDOM.render(element, container[, callback])`ã€‚

å°±åƒæœ€åˆçš„ `Hello, world` ä¾‹å­ä¸€æ ·ï¼š

```javascript
// vDom å°±æ˜¯ â€œReact å…ƒç´ â€
const vDom = <h1>Hello, world!</h1>;
ReactDOM.render(vDom, document.querySelector('#app'))
```

### Updating the Rendered Element

> React elements are `immutable`. Once you create an element, you can't change its children or attributes.

é‚£ä¹ˆï¼Œåœ¨å½“å‰ï¼ˆå‰é¢å·²äº†è§£åˆ°çš„çŸ¥è¯†ï¼‰æˆ‘ä»¬è¯¥å¦‚ä½•æ›´æ–°å·²æ¸²æŸ“çš„å…ƒç´ å‘¢ï¼Ÿ

å”¯ä¸€çš„æ–¹å¼å°±æ˜¯åˆ›å»ºä¸€ä¸ªæ–°çš„ React å…ƒç´ ï¼Œå¹¶å°†å…¶ä¼ å…¥åˆ° `ReactDOM.render(element, container[, callback])` ï¼Œé‡æ–°æ¸²æŸ“åˆ°æ ¹èŠ‚ç‚¹ï¼š

```javascript
const tick = () => {
    const element = (
        <>
            <h1 className="name-purple">Hello, Nicholas</h1>
            <h2>TIME: { new Date().toLocaleTimeString() }</h2>
        </>
    )

    ReactDOM.render(element, document.querySelector('#app'))
}

setInterval(tick, 1000)
```

> **æ³¨æ„ï¼š** åœ¨å®é™…çš„ React åº”ç”¨ä¸­åªä¼šè°ƒç”¨ä¸€æ¬¡ `ReactDOM.render(element, container[, callback])`; 

### React Only Updates What's Necessary

> React DOM compares the element and its children to the previous one, and only applies the DOM updates necessary to bring the DOM to the desired state.

![](./rendering-elements.gif)

ä»ä¸Šå›¾å¯ä»¥æ¸…æ™°çœ‹åˆ°ï¼Œå°½ç®¡æ¯ä¸€ç§’æˆ‘ä»¬éƒ½ä¼šæ–°åˆ›å»ºä¸€ä¸ªæè¿°æ•´ä¸ª UI æ ‘çš„å…ƒç´ ï¼ŒReact DOM åªä¼šæ›´æ–°å®é™…æ”¹å˜äº†çš„å†…å®¹ï¼Œä¹Ÿå°±æ˜¯ä¾‹å­ä¸­çš„æ–‡æœ¬èŠ‚ç‚¹ã€‚


## Components and Props

> Components let you split the UI into independent, reusable pieces and think about each piece in isolation.

ç»„ä»¶å…è®¸ä½ å°† UI æ‹†åˆ†ä¸ºç‹¬ç«‹çš„ã€å¯å¤ç”¨çš„ä»£ç ç‰‡æ®µï¼Œå¹¶å•ç‹¬è€ƒè™‘æ¯ä¸ªä»£ç ç‰‡æ®µã€‚

Conceptually, components are like JavaScript functions. They accept arbitrary(ä»»æ„åœ°) inputs (called "props") and return React elements describing what should appear on the screen.

### æ¨¡å—ä¸ç»„ä»¶ å’Œ æ¨¡å—åŒ–ä¸ç»„ä»¶åŒ–

- **æ¨¡å—**

æ¨¡å—å°±æ˜¯å‘å¤–æä¾›ç‰¹å®šåŠŸèƒ½çš„ js ç¨‹åºï¼Œä¸€èˆ¬å°±æ˜¯ä¸€ä¸ª js æ–‡ä»¶ï¼›ç›®çš„æ˜¯ä¸ºäº†å¤ç”¨ js ï¼Œç®€åŒ– js çš„ç¼–å†™ï¼Œæé«˜ js è¿è¡Œæ•ˆç‡ã€‚

- **ç»„ä»¶**

ç”¨æ¥å®ç°ç‰¹å®šï¼ˆå±€éƒ¨ï¼‰åŠŸèƒ½æ•ˆæœçš„ä»£ç é›†åˆï¼ˆhtml/css/jsï¼‰ï¼Œåœ¨è¾ƒé«˜å±‚é¢ä¸Šæ¥çœ‹ï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰çš„åŒ…å«ç‰¹å®šåŠ¨èƒ½çš„å…ƒç´ ã€‚

### Function and Class Components

```javascript
// 1. Function Components
// æ¥æ”¶å”¯ä¸€å¸¦æœ‰æ•°æ®çš„ "props"
const FunComponent = (props) => {
    console.log(props)
    return (
        <> 
            <h1>Hello, { props.name }</h1>
            <h3>Function Components (å‡½æ•°ç»„ä»¶ â€”â€” ç®€å•ç»„ä»¶)</h3>
        </>
    )
}

// æ¸²æŸ“ç»„ä»¶
ReactDOM.render(<FunComponent name="Nicholas" />, document.querySelector('#rootByFunComponents'))

// 2. Class Components
class ClassComponent extends React.Component {
    render() {
        // æ‰“å°å®ä¾‹å¯¹è±¡
        console.log(this)
        return (
            <> 
                <h1>Hello, { this.props.name }</h1>
                <h3>Class Components (ES6ç±»ç»„ä»¶ â€”â€” å¤æ‚ç»„ä»¶)</h3>
            </>
        ) 
    }
}

// æ¸²æŸ“ç»„ä»¶
ReactDOM.render(<ClassComponent name="Nicholas1" />, document.querySelector('#rootByClassComponents'))
```

> **æ³¨æ„ï¼šç»„ä»¶åç§°å¿…é¡»ä»¥å¤§å†™å­—æ¯å¼€å¤´ã€‚**
>
> React ä¼šå°†ä»¥å°å†™å­—æ¯å¼€å¤´çš„ç»„ä»¶è§†ä¸ºåŸç”Ÿ DOM æ ‡ç­¾ã€‚

### Composing Components

å®šä¹‰ç»„ä»¶çš„æ—¶å€™ï¼Œå¯ä»¥å¼•ç”¨å…¶ä»–ç»„ä»¶ã€‚åˆ©ç”¨è¿™ä¸€ç‰¹æ€§ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨åŒä¸€ç»„ä»¶æŠ½è±¡å‡ºä»»æ„å±‚æ¬¡çš„ç»†èŠ‚ã€‚æŒ‰é’®ã€è¡¨å•ã€å¯¹è¯æ¡†ã€ç”šè‡³æ•´ä¸ªå±å¹•çš„å†…å®¹ï¼šåœ¨ React åº”ç”¨ç¨‹åºä¸­ï¼Œè¿™äº›é€šå¸¸éƒ½ä¼šä»¥ç»„ä»¶çš„å½¢å¼è¡¨ç¤ºã€‚

```javascript
// ç»„åˆç»„ä»¶
const HelloComponent = (props) => {
    return <h1>Hello, { props.name }</h1>
}

const App = () => {
    return (
        <> 
            <HelloComponent name="Nicholas" />
            <HelloComponent name="Sara" />
            <HelloComponent name="Ethan" />
        </>
    )
}

ReactDOM.render(<App />, document.querySelector('#rootByFunComponents'))
```

### Props

ç»„ä»¶æ— è®ºä½¿ç”¨å‡½æ•°å£°æ˜è¿˜æ˜¯é€šè¿‡ class å£°æ˜ï¼Œéƒ½å†³ä¸èƒ½ä¿®æ”¹è‡ªèº«çš„ `props`ã€‚

> æ‰€æœ‰ React ç»„ä»¶éƒ½å¿…é¡»åƒçº¯å‡½æ•°ä¸€æ ·ä¿æŠ¤å®ƒä»¬çš„ props ä¸è¢«æ›´æ”¹ã€‚

#### éœ€æ±‚ï¼šè‡ªå®šä¹‰ä¸€ä¸ªç»„ä»¶ï¼Œç”¨æ¥æ˜¾ç¤ºä¸€ä¸ªäººå‘˜ä¿¡æ¯

è¯´æ˜ï¼š1.å¦‚æœæ€§åˆ«æ²¡æœ‰æŒ‡å®šï¼Œé»˜è®¤ä¸ºâ€œç”·â€œï¼›2.å¦‚æœå¹´é¾„æ²¡æœ‰æŒ‡å®šï¼Œé»˜è®¤ä¸ºâ€œ18â€

```javascript
/**
* éœ€æ±‚ï¼šè‡ªå®šä¹‰ä¸€ä¸ªç»„ä»¶ï¼Œç”¨æ¥æ˜¾ç¤ºä¸€ä¸ªäººå‘˜ä¿¡æ¯
* è¯´æ˜ï¼š1.å¦‚æœæ€§åˆ«æ²¡æœ‰æŒ‡å®šï¼Œé»˜è®¤ä¸ºâ€œç”·â€œï¼›2.å¦‚æœå¹´é¾„æ²¡æœ‰æŒ‡å®šï¼Œé»˜è®¤ä¸ºâ€œ18â€
*/
const Person = props => {
    console.log(props);
    return (
        <>
            <div>Name: { props.name }</div>
            <div>Age: { props.age }</div>
            <div>Sex: { props.sex }</div>
        </>
    );
};

// class Person extends React.Component {
//     render () {
//         console.log(this)
//         return (
//             <>
//                 <div>Name: { this.props.name }</div>
//                 <div>Age: { this.props.age }</div>
//                 <div>Sex: { this.props.sex }</div>
//             </>
//         )
//     }
// }

// defaultProps 
// å¯ä»¥ä¸ºç»„ä»¶æ·»åŠ é»˜è®¤ propsã€‚è¿™ä¸€èˆ¬ç”¨äº props æœªèµ‹å€¼ï¼Œä½†åˆä¸èƒ½ä¸º null çš„æƒ…å†µ
Person.defaultProps = {
    age: 18,
    sex: 'Male'
}

const UserName = {
    name: "Nicholas",
    age: 20
};

let element = <Person name={ UserName.name } age={ UserName.age } sex={ UserName.sex } />;

const container = document.querySelector("#rootByFunComponents");

// ç»„ä»¶å±æ€§è®¾ç½®çš„ä¸¤ç§æ–¹å¼ï¼ˆæš‚æ—¶å·²çŸ¥çš„ ğŸ˜‚ï¼‰

// 1. æ˜¾ç¤ºæŒ‡å®šå„ä¸ªå±æ€§ï¼šï¼ˆJavaScriptè¡¨è¾¾å¼ï¼Œå­—ç¬¦ä¸²å­—é¢é‡ï¼ŒPropsé»˜è®¤å€¼ä¸º â€Trueâ€œï¼‰
// ReactDOM.render(element, container);

// 2. ä½¿ç”¨ ES6 çš„æ‰©å±•ç¬¦ Spread Attributes
ReactDOM.render(<Person { ...UserName } />, container);
```

## State and Lifecycle


